<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ITTIA DB IoT C API Reference: Data Change Notification</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="api-reference.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ITTIA DB IoT C API Reference
   &#160;<span id="projectnumber">8.4.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('a00343.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Data Change Notification<div class="ingroups"><a class="el" href="a00340.html">C API</a> &raquo; <a class="el" href="a00341.html">Database</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00555.html">db_event_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data change notification event.  <a href="a00555.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga4e884d95b312ffcd8d58e9bb7b1d21d0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00358.html#gad5ef2fb2484082c162102d091d192f15">db_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#ga4e884d95b312ffcd8d58e9bb7b1d21d0">db_watch_table</a> (<a class="el" href="a00341.html#gaa4076d7d43ef1915336e6b43044ce8a5">db_t</a>, const <a class="el" href="a00038.html#a60f9b5f5c52086a35b3b1fb3793a26a2">db_objname_t</a> *, <a class="el" href="a00038.html#a7e299ba55b2426b18d06a350eba7061a">db_flags_t</a>, uint32_t utid)</td></tr>
<tr class="memdesc:ga4e884d95b312ffcd8d58e9bb7b1d21d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set up a notification handler for a particular table.  <a href="a00343.html#ga4e884d95b312ffcd8d58e9bb7b1d21d0">More...</a><br /></td></tr>
<tr class="separator:ga4e884d95b312ffcd8d58e9bb7b1d21d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9aaa16c278a7fae9aea5280a6d415260"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00358.html#gad5ef2fb2484082c162102d091d192f15">db_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#ga9aaa16c278a7fae9aea5280a6d415260">db_unwatch_table</a> (<a class="el" href="a00341.html#gaa4076d7d43ef1915336e6b43044ce8a5">db_t</a>, const <a class="el" href="a00038.html#a60f9b5f5c52086a35b3b1fb3793a26a2">db_objname_t</a> *)</td></tr>
<tr class="memdesc:ga9aaa16c278a7fae9aea5280a6d415260"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a notification handler for a particular table.  <a href="a00343.html#ga9aaa16c278a7fae9aea5280a6d415260">More...</a><br /></td></tr>
<tr class="separator:ga9aaa16c278a7fae9aea5280a6d415260"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1112f7e8cab8de1f9caf03dcc79b8d03"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00358.html#gad5ef2fb2484082c162102d091d192f15">db_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#ga1112f7e8cab8de1f9caf03dcc79b8d03">db_wait</a> (<a class="el" href="a00341.html#gaa4076d7d43ef1915336e6b43044ce8a5">db_t</a>, <a class="el" href="a00038.html#a661bbc8f65fcd39e3fba9764fea81d79">db_wtime_t</a>, <a class="el" href="a00555.html">db_event_t</a> *)</td></tr>
<tr class="memdesc:ga1112f7e8cab8de1f9caf03dcc79b8d03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for a notification message from the database.  <a href="a00343.html#ga1112f7e8cab8de1f9caf03dcc79b8d03">More...</a><br /></td></tr>
<tr class="separator:ga1112f7e8cab8de1f9caf03dcc79b8d03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7d7f8026930bed2d6dd5a1984b0ea31b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00358.html#gad5ef2fb2484082c162102d091d192f15">db_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#ga7d7f8026930bed2d6dd5a1984b0ea31b">db_wait_ex</a> (<a class="el" href="a00341.html#gaa4076d7d43ef1915336e6b43044ce8a5">db_t</a>, <a class="el" href="a00038.html#a661bbc8f65fcd39e3fba9764fea81d79">db_wtime_t</a>, <a class="el" href="a00555.html">db_event_t</a> *, <a class="el" href="a00353.html#ga052a427b8fb821dcabad3ef56dd4991f">db_row_t</a> row, <a class="el" href="a00353.html#ga052a427b8fb821dcabad3ef56dd4991f">db_row_t</a> aux_row)</td></tr>
<tr class="memdesc:ga7d7f8026930bed2d6dd5a1984b0ea31b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for a notification message from the database.  <a href="a00343.html#ga7d7f8026930bed2d6dd5a1984b0ea31b">More...</a><br /></td></tr>
<tr class="separator:ga7d7f8026930bed2d6dd5a1984b0ea31b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga4e884d95b312ffcd8d58e9bb7b1d21d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4e884d95b312ffcd8d58e9bb7b1d21d0">&#9670;&nbsp;</a></span>db_watch_table()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00358.html#gad5ef2fb2484082c162102d091d192f15">db_result_t</a> db_watch_table </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00341.html#gaa4076d7d43ef1915336e6b43044ce8a5">db_t</a>&#160;</td>
          <td class="paramname"><em>hdb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00038.html#a60f9b5f5c52086a35b3b1fb3793a26a2">db_objname_t</a> *&#160;</td>
          <td class="paramname"><em>table_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00038.html#a7e299ba55b2426b18d06a350eba7061a">db_flags_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>utid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set up a notification handler for a particular table. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hdb</td><td>Database handle. </td></tr>
    <tr><td class="paramname">table_name</td><td>Name of database table. </td></tr>
    <tr><td class="paramname">flags</td><td>Event types and scope, a bitwise combination of flags.<ul>
<li>The following flags control whether or not an event occurs:<ul>
<li><a class="el" href="a00038.html#a76a45d45d995705f0058a5a9e682edb1" title="Receive notification when new rows are added to the table.">DB_WATCH_ROW_INSERT</a> Receive notification when new rows are added to the table.</li>
<li><a class="el" href="a00038.html#aa30bbe4710b1ad6ae4532d65923e91e6" title="Receive notification when an existing row is updated.">DB_WATCH_ROW_UPDATE</a> Receive notification when an existing row is updated.</li>
<li><a class="el" href="a00038.html#a6e04b8bb808402a01fe755125d12585f" title="Receive notification when an existing row is deleted.">DB_WATCH_ROW_DELETE</a> Receive notification when an existing row is deleted.</li>
</ul>
</li>
<li>The following flags limit the scope of the rows obtained from <a class="el" href="a00343.html#ga7d7f8026930bed2d6dd5a1984b0ea31b" title="Wait for a notification message from the database.">db_wait_ex</a>:<ul>
<li><a class="el" href="a00038.html#abe8e325ecce50ec5322c0f0b608786fc" title="Include a copy of the primary key in the watch row.">DB_WATCH_PRIMARY_KEY</a> Include a copy of the primary key in the watch row.</li>
<li><a class="el" href="a00038.html#ae655e1745101db1bab1c96436168aa9b" title="Include a copy of all modified fields in the watch row.">DB_WATCH_MODIFIED_FIELDS</a> Include a copy of all modified fields in the watch row.</li>
<li><a class="el" href="a00038.html#ad0f3239393740ec2a97c6d67a383e240" title="Include a copy of all bound fields in the watch row.">DB_WATCH_BOUND_FIELDS</a> Include a copy of all bound fields in the watch row.</li>
<li><a class="el" href="a00038.html#a29cf30e51ef21fd9c84e9a84dbdf3961" title="Include a copy of all fields in the watch row.">DB_WATCH_ALL_FIELDS</a> Include a copy of all fields in the watch row.</li>
</ul>
</li>
<li>The following flags control the use of the auxiliary row:<ul>
<li><a class="el" href="a00038.html#af37e6c01919977763da01855bb7a859e" title="Include the original values for any updated fields in the watch aux row.">DB_WATCH_FORMER_VALUES</a> Include the original values for any updated fields in the watch aux row.</li>
</ul>
</li>
<li>The following flags require events to satisfy certain conditions:<ul>
<li><a class="el" href="a00038.html#a247fe0eee8230c996dd3853837aac48b" title="Only watch for events that modify the row (does not restrict insert or delete.)">DB_WATCH_FILTER_MODIFIED</a> Only watch for events that modify the row (does not restrict insert or delete.)</li>
<li><a class="el" href="a00038.html#ae88261f7b5b64dc80cf49c2877c44f98" title="Only watch for events that are not caused by the same connection.">DB_WATCH_FILTER_NOT_SELF</a> Only watch for events that are not caused by the same connection.</li>
</ul>
</li>
</ul>
</td></tr>
    <tr><td class="paramname">utid</td><td>User supplied numeric id for the handler.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><a class="el" href="a00358.html#gab7352150a9738cc0038615a468abd0e0" title="A result of success.">DB_OK</a> when successful.</li>
<li><a class="el" href="a00358.html#gad369675948e5476d0572af3f0f1308cb" title="A result of failure for functions that return db_result_t.">DB_FAIL</a> on failure.</li>
</ul>
</dd></dl>
<p>On failure, one of the following error codes is set:</p><ul>
<li><a class="el" href="a00358.html#ga63227b4da0b860d0b764ac29839c5737" title="Invalid argument.">DB_EINVAL</a> Caused by: invalid database handle, table name is null, invalid watch flags.</li>
</ul>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="a00343.html#ga9aaa16c278a7fae9aea5280a6d415260" title="Remove a notification handler for a particular table.">db_unwatch_table</a>, <a class="el" href="a00343.html#ga1112f7e8cab8de1f9caf03dcc79b8d03" title="Wait for a notification message from the database.">db_wait</a>, <br  />
 <a class="el" href="a00352.html#ga510bd45a7315427f1e110c9e1e623051" title="Set a cursor&#39;s current row from a bookmark.">db_goto_bookmark</a>, <br  />
 <a class="el" href="a00358.html#gabdb82a13bdebe1df5d097827243c4639" title="Get the most recent error code.">get_db_error</a>, <a class="el" href="a00358.html#ga6a19bf0ab3b1ef693a517895a2b168d5" title="Clear the current error code.">clear_db_error</a>, <a class="el" href="a00358.html" title="Errors, warnings, return codes, and related helper functions.">Error Handling</a> </dd></dl>

</div>
</div>
<a id="ga9aaa16c278a7fae9aea5280a6d415260"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9aaa16c278a7fae9aea5280a6d415260">&#9670;&nbsp;</a></span>db_unwatch_table()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00358.html#gad5ef2fb2484082c162102d091d192f15">db_result_t</a> db_unwatch_table </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00341.html#gaa4076d7d43ef1915336e6b43044ce8a5">db_t</a>&#160;</td>
          <td class="paramname"><em>hdb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00038.html#a60f9b5f5c52086a35b3b1fb3793a26a2">db_objname_t</a> *&#160;</td>
          <td class="paramname"><em>table_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove a notification handler for a particular table. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hdb</td><td>Database handle. </td></tr>
    <tr><td class="paramname">table_name</td><td>Name of database table.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><a class="el" href="a00358.html#gab7352150a9738cc0038615a468abd0e0" title="A result of success.">DB_OK</a> when successful.</li>
<li><a class="el" href="a00358.html#gad369675948e5476d0572af3f0f1308cb" title="A result of failure for functions that return db_result_t.">DB_FAIL</a> on failure.</li>
</ul>
</dd></dl>
<p>On failure, one of the following error codes is set:</p><ul>
<li><a class="el" href="a00358.html#ga63227b4da0b860d0b764ac29839c5737" title="Invalid argument.">DB_EINVAL</a> Casued by: invalid database handle, table name is null.</li>
</ul>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="a00343.html#ga4e884d95b312ffcd8d58e9bb7b1d21d0" title="Set up a notification handler for a particular table.">db_watch_table</a>, <a class="el" href="a00343.html#ga1112f7e8cab8de1f9caf03dcc79b8d03" title="Wait for a notification message from the database.">db_wait</a>, <br  />
 <a class="el" href="a00358.html#gabdb82a13bdebe1df5d097827243c4639" title="Get the most recent error code.">get_db_error</a>, <a class="el" href="a00358.html#ga6a19bf0ab3b1ef693a517895a2b168d5" title="Clear the current error code.">clear_db_error</a>, <a class="el" href="a00358.html" title="Errors, warnings, return codes, and related helper functions.">Error Handling</a> </dd></dl>

</div>
</div>
<a id="ga1112f7e8cab8de1f9caf03dcc79b8d03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1112f7e8cab8de1f9caf03dcc79b8d03">&#9670;&nbsp;</a></span>db_wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00358.html#gad5ef2fb2484082c162102d091d192f15">db_result_t</a> db_wait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00341.html#gaa4076d7d43ef1915336e6b43044ce8a5">db_t</a>&#160;</td>
          <td class="paramname"><em>hdb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00038.html#a661bbc8f65fcd39e3fba9764fea81d79">db_wtime_t</a>&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00555.html">db_event_t</a> *&#160;</td>
          <td class="paramname"><em>event</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait for a notification message from the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hdb</td><td>Database handle </td></tr>
    <tr><td class="paramname">timeout</td><td>Maximum length of time to wait for a notification 0 - returns right away with DB_FAIL if no notification or DB_OK if there was a notification to report. </td></tr>
    <tr><td class="paramname">event</td><td>Event structure containing information about the event. Check event.u.utid </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><a class="el" href="a00358.html#gab7352150a9738cc0038615a468abd0e0" title="A result of success.">DB_OK</a> when successful.</li>
<li><a class="el" href="a00358.html#gad369675948e5476d0572af3f0f1308cb" title="A result of failure for functions that return db_result_t.">DB_FAIL</a> on failure.</li>
</ul>
</dd></dl>
<p>On failure, one of the following error codes is set:</p><ul>
<li><a class="el" href="a00358.html#gac8297cf27c1b3729dc4953ff46fcc7db" title="Unable to acquire lock.">DB_ELOCKED</a> When no notification event occurs within the timeout period.</li>
<li><a class="el" href="a00358.html#ga63227b4da0b860d0b764ac29839c5737" title="Invalid argument.">DB_EINVAL</a> Invalid database handle.</li>
</ul>
<p>This function does not start or require a transaction, but can be used safely within a transaction.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="a00343.html#ga4e884d95b312ffcd8d58e9bb7b1d21d0" title="Set up a notification handler for a particular table.">db_watch_table</a>, <a class="el" href="a00343.html#ga9aaa16c278a7fae9aea5280a6d415260" title="Remove a notification handler for a particular table.">db_unwatch_table</a>, <br  />
 <a class="el" href="a00358.html#gabdb82a13bdebe1df5d097827243c4639" title="Get the most recent error code.">get_db_error</a>, <a class="el" href="a00358.html#ga6a19bf0ab3b1ef693a517895a2b168d5" title="Clear the current error code.">clear_db_error</a>, <a class="el" href="a00358.html" title="Errors, warnings, return codes, and related helper functions.">Error Handling</a></dd></dl>

</div>
</div>
<a id="ga7d7f8026930bed2d6dd5a1984b0ea31b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7d7f8026930bed2d6dd5a1984b0ea31b">&#9670;&nbsp;</a></span>db_wait_ex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00358.html#gad5ef2fb2484082c162102d091d192f15">db_result_t</a> db_wait_ex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00341.html#gaa4076d7d43ef1915336e6b43044ce8a5">db_t</a>&#160;</td>
          <td class="paramname"><em>hdb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00038.html#a661bbc8f65fcd39e3fba9764fea81d79">db_wtime_t</a>&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00555.html">db_event_t</a> *&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00353.html#ga052a427b8fb821dcabad3ef56dd4991f">db_row_t</a>&#160;</td>
          <td class="paramname"><em>hrow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00353.html#ga052a427b8fb821dcabad3ef56dd4991f">db_row_t</a>&#160;</td>
          <td class="paramname"><em>haux_row</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait for a notification message from the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hdb</td><td>Database handle </td></tr>
    <tr><td class="paramname">timeout</td><td>Maximum length of time to wait for a notification 0 - returns right away with DB_FAIL if no notification or DB_OK if there was a notification to report. </td></tr>
    <tr><td class="paramname">event</td><td>Event structure containing information about the event. Check event.u.utid </td></tr>
    <tr><td class="paramname">hrow</td><td>Destination for some or all fields of the modified row. </td></tr>
    <tr><td class="paramname">haux_row</td><td>For update events only, a destination for the original values.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><a class="el" href="a00358.html#gab7352150a9738cc0038615a468abd0e0" title="A result of success.">DB_OK</a> when successful.</li>
<li><a class="el" href="a00358.html#gad369675948e5476d0572af3f0f1308cb" title="A result of failure for functions that return db_result_t.">DB_FAIL</a> on failure.</li>
</ul>
</dd></dl>
<p>On failure, one of the following error codes is set:</p><ul>
<li><a class="el" href="a00358.html#ga63227b4da0b860d0b764ac29839c5737" title="Invalid argument.">DB_EINVAL</a> Invalid database handle.</li>
<li><a class="el" href="a00358.html#gac8297cf27c1b3729dc4953ff46fcc7db" title="Unable to acquire lock.">DB_ELOCKED</a> Timeout expired.</li>
</ul>
<dl class="section pre"><dt>Precondition</dt><dd><em>hrow</em> and <em>haux_row</em> must be allocated, with any size greater than zero, regardless of the number of fields in the event. Existing bindings are replaced, if any.</dd></dl>
<p>After the event, <em>hrow</em> and <em>haux_row</em> may contain data, depending on how the notification event was configured in <a class="el" href="a00343.html#ga4e884d95b312ffcd8d58e9bb7b1d21d0" title="Set up a notification handler for a particular table.">db_watch_table</a>. The fields bound to the row will correspond to the table that originated the event. Only fields included in the event are bound to these rows. For fields that are not included in the event, <a class="el" href="a00353.html#ga5ca76dc285abf3f6171a1014af40a370" title="Checks to see if the given field is null.">db_is_null</a> will return -1.</p>
<div class="fragment"><div class="line"><a class="code" href="a00341.html#gaa4076d7d43ef1915336e6b43044ce8a5">db_t</a> hdb = ...;</div>
<div class="line"><a class="code" href="a00358.html#gad5ef2fb2484082c162102d091d192f15">db_result_t</a> rc;</div>
<div class="line"><a class="code" href="a00555.html">db_event_t</a> evt;</div>
<div class="line"><a class="code" href="a00353.html#ga052a427b8fb821dcabad3ef56dd4991f">db_row_t</a> hrow = <a class="code" href="a00353.html#gacbfc27942ba766aa7c5fa77d91e56dc9">db_alloc_row</a>(NULL, 1);</div>
<div class="line"><span class="keywordflow">do</span> {</div>
<div class="line">  rc = <a class="code" href="a00343.html#ga7d7f8026930bed2d6dd5a1984b0ea31b">db_wait_ex</a>(hdb, 0, &amp;evt, hrow, NULL);</div>
<div class="line">  ...</div>
<div class="line">} <span class="keywordflow">while</span> (<span class="keyword">true</span>);</div>
<div class="ttc" id="aa00341_html_gaa4076d7d43ef1915336e6b43044ce8a5"><div class="ttname"><a href="a00341.html#gaa4076d7d43ef1915336e6b43044ce8a5">db_t</a></div><div class="ttdeci">struct db_t_s * db_t</div><div class="ttdoc">Database handle.</div><div class="ttdef"><b>Definition:</b> db.h:82</div></div>
<div class="ttc" id="aa00343_html_ga7d7f8026930bed2d6dd5a1984b0ea31b"><div class="ttname"><a href="a00343.html#ga7d7f8026930bed2d6dd5a1984b0ea31b">db_wait_ex</a></div><div class="ttdeci">C_EXPORT db_result_t db_wait_ex(db_t hdb, db_wtime_t timeout, db_event_t *event, db_row_t hrow, db_row_t haux_row)</div><div class="ttdoc">Wait for a notification message from the database.</div><div class="ttdef"><b>Definition:</b> api.cpp:9906</div></div>
<div class="ttc" id="aa00353_html_ga052a427b8fb821dcabad3ef56dd4991f"><div class="ttname"><a href="a00353.html#ga052a427b8fb821dcabad3ef56dd4991f">db_row_t</a></div><div class="ttdeci">struct db_row_t_s * db_row_t</div><div class="ttdoc">Row handle.</div><div class="ttdef"><b>Definition:</b> db.h:84</div></div>
<div class="ttc" id="aa00353_html_gacbfc27942ba766aa7c5fa77d91e56dc9"><div class="ttname"><a href="a00353.html#gacbfc27942ba766aa7c5fa77d91e56dc9">db_alloc_row</a></div><div class="ttdeci">C_EXPORT db_row_t db_alloc_row(const db_bind_t *binds, db_fieldno_t nfields)</div><div class="ttdoc">Allocate a row using absolute or relative bindings.</div><div class="ttdef"><b>Definition:</b> api.cpp:7389</div></div>
<div class="ttc" id="aa00358_html_gad5ef2fb2484082c162102d091d192f15"><div class="ttname"><a href="a00358.html#gad5ef2fb2484082c162102d091d192f15">db_result_t</a></div><div class="ttdeci">struct rc_s * db_result_t</div><div class="ttdoc">API call result.</div><div class="ttdef"><b>Definition:</b> db.h:151</div></div>
<div class="ttc" id="aa00555_html"><div class="ttname"><a href="a00555.html">db_event_t</a></div><div class="ttdoc">Data change notification event.</div><div class="ttdef"><b>Definition:</b> db.h:2186</div></div>
</div><!-- fragment --><p>This function does not start or require a transaction, but can be used safely within a transaction.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="a00343.html#ga4e884d95b312ffcd8d58e9bb7b1d21d0" title="Set up a notification handler for a particular table.">db_watch_table</a>, <a class="el" href="a00343.html#ga9aaa16c278a7fae9aea5280a6d415260" title="Remove a notification handler for a particular table.">db_unwatch_table</a>, <br  />
 <a class="el" href="a00358.html#gabdb82a13bdebe1df5d097827243c4639" title="Get the most recent error code.">get_db_error</a>, <a class="el" href="a00358.html#ga6a19bf0ab3b1ef693a517895a2b168d5" title="Clear the current error code.">clear_db_error</a>, <a class="el" href="a00358.html" title="Errors, warnings, return codes, and related helper functions.">Error Handling</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Copyright &copy; 2005-2020 ITTIA&trade;. All rights reserved.</li>
  </ul>
</div>
</body>
</html>
